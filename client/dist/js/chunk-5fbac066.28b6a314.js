(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fbac066"],{"04e1":function(e,t,r){"use strict";var a=r("7afa");function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!==typeof e)throw new n("Invalid token specified");t=t||{};var r=!0===t.header?0:1;try{return JSON.parse(a(e.split(".")[r]))}catch(i){throw new n("Invalid token specified: "+i.message)}},e.exports.InvalidTokenError=n},"7afa":function(e,t,r){var a=r("9b81");function n(e){return decodeURIComponent(a(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(r){return a(t)}}},"9b81":function(e,t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,s=0,u="";i=t.charAt(s++);~i&&(n=o%4?64*n+i:i,o++%4)?u+=String.fromCharCode(255&n>>(-2*o&6)):0)i=r.indexOf(i);return u}a.prototype=new Error,a.prototype.name="InvalidCharacterError",e.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||n},a55b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"view"},[r("Form",{on:{emit:e.emitForm}})],1)},n=[],i=(r("a481"),r("96cf"),r("3b8d")),o=r("d225"),s=r("b0b4"),u=r("308d"),l=r("6bb5"),c=r("4e2b"),p=r("9ab4"),m=r("60a3"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"view"},[r("el-form",{ref:"ruleForm",attrs:{"label-width":"120px",model:e.ruleForm,rules:e.rules},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("ruleForm")}}},[r("h2",[e._v("登录")]),r("el-form-item",{attrs:{prop:"email",label:"邮箱"}},[r("el-input",{attrs:{type:"email",autofocus:""},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{prop:"password",label:"密码"}},[r("el-input",{attrs:{type:"password",placeholder:"6~20位字母、数字或英文符号组合，区分大小写"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认")]),r("p",[r("router-link",{staticClass:"link-text",attrs:{to:"/forgetPassword"}},[e._v("忘记密码")]),r("router-link",{staticClass:"link-text",staticStyle:{float:"right"},attrs:{to:"/register"}},[e._v("立即注册")])],1)],1)],1)],1)},f=[],b=r("1aab"),h=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.ruleForm={name:"",email:"",password:"",passwordConfirm:"",role:""},e.rules={email:[{message:"不能为空",trigger:"blur",required:!0},{message:"邮箱格式不正确",type:"email",trigger:"blur",required:!0}],password:[{message:"不能为空",trigger:"blur",required:!0},{validator:e.isPwdLong,trigger:"blur"},{validator:e.pwdRules,trigger:"blur"},{message:"请填写正确的密码",pattern:/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/,trigger:"blur"}]},e}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"submitForm",value:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.executeEmit()})}},{key:"executeEmit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.emit({data:{email:this.ruleForm.email,password:this.ruleForm.password}})}},{key:"emit",value:function(e){this.$emit("emit",e)}}]),t}(Object(m["b"])(b["c"]));h=p["a"]([Object(m["a"])({components:{}})],h);var v=h,g=v,w=(r("fa3f"),r("2877")),y=Object(w["a"])(g,d,f,!1,null,"3d6384c8",null),k=y.exports,O=r("04e1"),F=r.n(O),j=(r("ac6a"),r("456d"),r("7618"));function x(e){return void 0===e||"object"===Object(j["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}var $=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(c["a"])(t,e),Object(s["a"])(t,[{key:"emitForm",value:function(e){var t=e.data;this.request({api:"/user/login",data:t,method:"post"})}},{key:"request",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$request(t);case 2:r=e.sent,r.status>=200&&r.status<300&&(this.$message({message:"登录成功",type:"success"}),!0===r.data.success&&(a=r.data.token,this.$store.commit("setEleToken",a),n=F()(a),this.$store.dispatch("setAuthenticated",!x(n)),this.$store.dispatch("setUser",n)),i=this.$route.query.redirect,i?this.$router.replace(i):this.$router.push("/"));case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(m["d"]);$=p["a"]([Object(m["a"])({components:{Form:k}})],$);var C=$,E=C,_=Object(w["a"])(E,a,n,!1,null,null,null);t["default"]=_.exports},d7a8:function(e,t,r){},fa3f:function(e,t,r){"use strict";var a=r("d7a8"),n=r.n(a);n.a}}]);